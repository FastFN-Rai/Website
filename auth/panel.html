<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="canonical" href="https://rai.uplauncher.xyz/" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css"
    />
    <link rel="icon" href="/favicon.ico" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="/menu/setup.js" type="module"></script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3326621014935824"
      crossorigin="anonymous"
    ></script>
    <title>雷さんのサイト</title>
    <link rel="stylesheet" href="/css/index.css" />
  </head>

  <body>
    <header></header>
    <br />

    <div class="content has-text-centered">
      <h1>パネル</h1>
      <p>アカウントの情報</p>

      <article class="message" style="display: none">
        <div class="message-body has-text-left">
          <p>
            メールアドレスを認証してください。あなたのメールアドレスにリンクを送信しました。
          </p>
        </div>
      </article>

      <h2>メールアドレス</h2>
      <p>メールアドレスは、アカウントにログインする際に必要です。</p>
      <p id="email_info"></p>
      <input
        class="input"
        id="email_password"
        type="password"
        style="width: 15%"
        placeholder="パスワードを入力"
      />
      <input
        class="input"
        id="email_new"
        type="email"
        style="width: 15%"
        placeholder="email@example.com"
      /><br /><br />
      <button class="button is-primary" id="email_submit">
        メールアドレスを変更</button
      ><br /><br />

      <h2>パスワード</h2>
      <p>
        アカウントの安全のためにも、パスワードは<strong
          >誰にも公開しないでください。</strong
        ><br />
        パスワードを公開してしまった場合は、今すぐパスワードを変更してください。
      </p>
      <p id="password_info"></p>
      <input
        class="input"
        id="password_current"
        type="password"
        style="width: 15%"
        placeholder="現在のパスワード"
      /><br /><br />
      <input
        class="input"
        id="password_new"
        type="password"
        style="width: 15%"
        placeholder="新しいパスワード"
      /><br /><br />

      <button id="password_submit" class="button is-primary" disabled>
        パスワードを変更</button
      ><br /><br />

      <h2>破壊的な変更</h2>
      <br />

      <h4>2段階認証</h4>
      <p>
        2段階認証は、ログインするときにパスワードと、認証コードまたはSMSに届いたコードを<br />
        使用してログインします。そのため、大幅にセキュリティが向上します。<br />
        <strong
          >現在はベータ版です。ロックアウトされた場合は、連絡してください。</strong
        >
      </p>

      <button class="button is-danger" id="2fa_enable">
        2段階認証を有効にする</button
      ><br /><br />

      <article class="message is-warning">
        <div class="message-body has-text-left">
          <p>現在、2段階認証を無効にすることはできません。無効にするには、<a href="/contact.html">連絡してください。</a>
        </div>
      </article>    

      <h4>アカウントを削除する</h4>
      <p>
        アカウントが不要になった場合は、アカウントを削除することができます。<br />
        パスワードと確認用のテキストボックスに<strong>「delete」</strong>と入れて削除します。
      </p>

      <button
        onclick="document.getElementById('remove_dialog').showModal()"
        class="button is-danger"
      >
        アカウントを削除する</button
      ><br /><br />
    </div>

    <dialog id="remove_dialog">
      <h3 class="modal-header">アカウントを削除する</h3>
      <div class="modal-body content">
        <p>アカウントを削除すると、すべてのアカウントデータが削除されます。</p>
        <ul>
          <li>雷の画像投稿サービスでのすべてのデータ</li>
          <li>雷のウェブサイト上でのプレミアム特典</li>
        </ul>
        <p>
          どんな場合でも、プレミアムの返金は受け付けておりません。<br />アカウント削除の操作は元に戻せません。
        </p>
        <p id="remove_info"></p>

        <p style="font-weight: bold">パスワード</p>
        <input
          type="password"
          id="remove_password"
          class="input"
          placeholder="パスワードを入力"
        /><br />
      </div>
      <div class="modal-footer">
        <button
          onclick="document.getElementById('remove_dialog').close()"
          style="margin-right: 1vw"
          class="button is-primary"
        >
          キャンセル
        </button>
        <button id="remove_submit" class="button is-danger" disabled>
          アカウントを削除
        </button>
      </div>
      <button
        onclick="document.getElementById('remove_dialog').close()"
        class="close"
        type="button"
      >
        &times;
      </button>
    </dialog>

    <dialog id="2fa_dialog">
      <h3 class="modal-header">2段階認証(2FA)を有効にする</h3>
      <div class="modal-body content">
        <p>
          2段階認証を有効にすると、サインインのときにSMSでワンタイムパスワードを受け取ります。<br />
          そのため、大幅にセキュリティが向上します。その代わり、ロックアウトされる危険性があります。<br />
          2段階認証を有効にした電話番号を変更する際は、一旦2段階認証を無効にしましょう。
        </p>
        <p id="2fa_info"></p>

        <div id="recaptcha_container"></div>

        <p style="font-weight: bold">パスワード</p>
        <input
          type="password"
          id="2fa_password"
          class="input"
          placeholder="パスワードを入力"
        />
        <input
          type="tel"
          id="2fa_phonenumber"
          class="input"
          placeholder="電話番号"
        /><br /><br />
        <button id="2fa_sendcode" class="button is-primary">
          コードを送信
        </button>

        <input
          type="text"
          id="2fa_verificationcode"
          class="input"
          disabled
          placeholder="認証コード"
        />
      </div>
      <div class="modal-footer">
        <button
          onclick="document.getElementById('2fa_dialog').close()"
          style="margin-right: 1vw"
          class="button is-primary"
        >
          キャンセル
        </button>
        <button id="2fa_submit" class="button is-primary" disabled>
          コードを確認して2段階認証を有効にする
        </button>
      </div>
      <button
        onclick="document.getElementById('2fa_dialog').close()"
        class="close"
        type="button"
      >
        &times;
      </button>
    </dialog>

    <footer></footer>
    <script type="module" src="/js/firebase.js"></script>
    <script type="module" src="/js/panel/main.js"></script>
    <script type="module" src="/js/panel/account.js"></script>
  </body>
</html>
